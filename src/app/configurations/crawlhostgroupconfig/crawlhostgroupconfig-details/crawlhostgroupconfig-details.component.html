<h2 *ngIf="crawlHostGroupConfig.id">Crawlhostgroupconfig Details</h2>
<h2 *ngIf="!crawlHostGroupConfig.id">New Crawlhostgroupconfig</h2>


<form [formGroup]="crawlHostGroupConfigFG" fxLayout="column">

  <md-form-field formGroupName="meta">
    <input mdInput formControlName="name" placeholder="Navn">
    <md-error *ngIf="! crawlHostGroupConfigFG.controls.meta.valid">
      Navn er påkrevd.
    </md-error>
  </md-form-field>

  <md-form-field formGroupName="meta">
    <input mdInput formControlName="description" placeholder="Beskrivelse">
  </md-form-field>

  <md-expansion-panel formArrayName="ip_range">
    <md-expansion-panel-header>
      <md-panel-title>
        IP-range
      </md-panel-title>
      <md-panel-description>
        IP-range som skal benyttes
      </md-panel-description>
    </md-expansion-panel-header>
    <md-card *ngFor="let ip_range of ip_ranges.controls; let i=index" [formGroupName]="i">
      <md-card-header>
        <md-card-title>IP-range #{{i + 1}}</md-card-title>
      </md-card-header>
      <md-card-content>
        <md-form-field>
          <input mdInput formControlName="ip_from" placeholder="Fra IP-addresse:">
          <md-error *ngIf="! ip_ranges.controls[i].controls.ip_from.valid">
            En gyldig IP-addresse er påkrevd.
          </md-error>
        </md-form-field>
        <md-form-field>
          <input mdInput formControlName="ip_to" placeholder="Til IP-addresse">
          <md-error *ngIf="! ip_ranges.controls[i].controls.ip_to.valid">
            En gyldig IP-addresse er påkrevd.
          </md-error>
        </md-form-field>
        <button md-icon-button (click)="removeIpRange(i)">
          <md-icon>close</md-icon>
        </button>
      </md-card-content>
    </md-card>
    <button md-raised-button color="accent" (click)="addIpRange()">Legg til IP-range</button>
  </md-expansion-panel>

  <ng-container formGroupName="meta">
    <app-labels formControlName="label"></app-labels>
  </ng-container>

  <div>
    <button md-raised-button color="primary"
            [disabled]="!crawlHostGroupConfigFG.valid"
            *ngIf="!crawlHostGroupConfig.id"
            (click)="createCrawlHostGroupConfig(crawlHostGroupConfigFG.value)" novalidate>
      Lagre
    </button>
    <button md-raised-button color="primary"
            *ngIf="crawlHostGroupConfig.id"
            [disabled]="!crawlHostGroupConfigFG.valid"
            (click)="updateCrawlHostGroupConfig(crawlHostGroupConfigFG.value)">
      Lagre
    </button>
    <button md-raised-button color="accent"
            (click)="revert()">Tilbakestill
    </button>

    <button md-raised-button color="warn"
            *ngIf="crawlHostGroupConfig.id"
            (click)="deleteCrawlHostGroupConfig(crawlHostGroupConfig.id); $event.stopPropagation()">Slett
    </button>
  </div>
</form>
