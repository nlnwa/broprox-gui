<div class="col-md-12">
  <h2 *ngIf="crawlconfig.id">Crawlconfig Details</h2>
  <h2 *ngIf="!crawlconfig.id">New Crawlconfig</h2>
</div>

<form [formGroup]="crawlconfigForm">

  <div class="form-group" formGroupName="meta">
    <label class="center-block">Navn:
      <input class="form-control" formControlName="name">
    </label>
    <small [hidden]="crawlconfigForm.controls.meta.valid" class="text-danger">
      Name required.
    </small>
  </div>
  <div class="form-group" formGroupName="meta">
    <label class="center-block">Beskrivelse:
      <input class="form-control" formControlName="description">
    </label>
  </div>

  <div class="form-group">
    <label class="center-block">Browserconfig:
      <angular2-multiselect [data]="browserconfigList" [(ngModel)]="selectedBrowserconfigItems"
                            [settings]="dropdownBrowserconfigSettings"
                            formControlName="browser_config_id"></angular2-multiselect>
    </label>
    <small [hidden]="crawlconfigForm.controls.browser_config_id.valid" class="text-danger">
      Browserconfig required.
    </small>
  </div>

  <div class="form-group">
    <label class="center-block">Politenessconfig:
      <angular2-multiselect [data]="politenessconfigList" [(ngModel)]="selectedPolitenessconfigItems"
                            [settings]="dropdownPolitenessconfigSettings"
                            formControlName="politeness_id"></angular2-multiselect>
    </label>
    <small [hidden]="crawlconfigForm.controls.politeness_id.valid" class="text-danger">
      Politenessconfig required.
    </small>
  </div>

  <div class="form-group">
    <label class="center-block">DNS TTL
      <input class="form-control" type="number" formControlName="minimum_dns_ttl_s">
    </label>
    <small [hidden]="crawlconfigForm.controls.minimum_dns_ttl_s.valid" class="text-danger">
      minimum_dns_ttl_s required.
    </small>
  </div>

  <div class="form-group" formGroupName="extra">
    <label class="center-block">Ekstraher tekst
      <label class="mdl-radio mdl-js-radio">
        <input type="radio" name="extract_text" [value]="true" formControlName="extract_text">
        <span class="mdl-radio__label">Ja</span>
      </label>
      <label class="mdl-radio mdl-js-radio">
        <input type="radio" name="extract_text" [value]="false" formControlName="extract_text">
        <span class="mdl-radio__label">Nei</span>
      </label>
    </label>
  </div>

  <div class="form-group" formGroupName="extra">
    <label class="center-block">Lag snapshots
      <label class="mdl-radio mdl-js-radio" for="create_snapshot_true">
        <input type="radio" id="create_snapshot_true" class="mdl-radio__button" name="create_snapshot" [value]="true"
               formControlName="create_snapshot">
        <span class="mdl-radio__label">Ja</span>
      </label>
      <label class="mdl-radio mdl-js-radio " for="create_snapshot_false">
        <input type="radio" id="create_snapshot_false" class="mdl-radio__button" name="create_snapshot" [value]="false"
               formControlName="create_snapshot">
        <span class="mdl-radio__label">Nei</span>
      </label>
    </label>
  </div>
  <div class="form-group">
    <label class="center-block">Dybde f√∏rst

      <label class="mdl-radio mdl-js-radio" for="depth_first_true">
        <input type="radio" id="depth_first_true" class="mdl-radio__button"
               name="depth_first" [value]="true" formControlName="depth_first">
        <span class="mdl-radio__label">Ja</span>
      </label>
      <label class="mdl-radio mdl-js-radio " for="depth_first_false">
        <input type="radio" id="depth_first_false" class="mdl-radio__button"
               name="depth_first" [value]="false" formControlName="depth_first">
        <span class="mdl-radio__label">Nei</span>
      </label>
    </label>
  </div>
  <div class="form-group">

    <div formArrayName="label" class="well well-lg">
      <div *ngFor="let label of label.controls; let i=index" [formGroupName]="i">
        <div class="panel-heading">
          <span>Merkelapp #{{i + 1}}</span>
          <span class="glyphicon glyphicon-remove pull-right" (click)="removeLabel(i)"></span>
        </div>

        <div class="form-group">
          <label class="center-block">Type:
            <input class="form-control" formControlName="key">
          </label>
        </div>
        <div class="form-group">
          <label class="center-block">Verdi:
            <input class="form-control" formControlName="value">
          </label>
        </div>
      </div>
      <button class="btn btn-info" (click)="addLabel()" type="button">Legg til merkelapp</button>
    </div>
  </div>

  <button class="btn btn-primary" [disabled]="!crawlconfigForm.valid" *ngIf="!crawlconfig.id"
          (click)="createCrawlconfig(crawlconfigForm.value)" novalidate>
    Lagre
  </button>
  <button class="btn btn-primary" *ngIf="crawlconfig.id" [disabled]="!crawlconfigForm.valid"
          (click)="updateCrawlconfig(crawlconfigForm.value)">Lagre

  </button>
  <button class="btn btn-success" (click)="revert()">Tilbakestill</button>

  <button class="btn btn-danger" *ngIf="crawlconfig.id"
          (click)="deleteCrawlconfig(crawlconfig.id); $event.stopPropagation()">Slett
  </button>


</form>

