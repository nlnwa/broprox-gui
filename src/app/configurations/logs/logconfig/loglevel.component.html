<form [formGroup]="form">
  <mat-card>
    <mat-card-content fxLayout="row">
      <div fxLayout="column">
        <mat-toolbar>
          <span i18n="@@logconfigHeader">Logconfig</span>
          <span class="fill-space"></span>
          <button mat-mini-fab *ngIf="isAdmin || isCurator" (click)="onAdd()">
            <mat-icon>add</mat-icon>
          </button>
        </mat-toolbar>
        <ng-container formArrayName="log_level">
          <ng-container *ngFor="let log_level of log_levelArray.controls;let i=index">
            <div [formGroupName]="i" fxLayout="row" fxLayoutGap="1em">
              <mat-form-field>
                <input matInput formControlName="logger" placeholder="Logger"
                       i18n-placeholder="@@logconfigFormLoggerPlaceholder">
              </mat-form-field>
              <mat-form-field>
                <mat-select formControlName="level" placeholder="Level"
                            i18n-placeholder="@@logconfigFormLevelPlaceholder">
                  <mat-option *ngFor="let level of levels | async" [value]="level">{{level}}</mat-option>
                </mat-select>
              </mat-form-field>
              <button mat-icon-button color="warn" (click)="onDelete(i)" *ngIf="isAdmin || isCurator">
                <mat-icon>close</mat-icon>
              </button>
            </div>
          </ng-container>
        </ng-container>
      </div>
    </mat-card-content>
    <mat-card-actions *ngIf="isAdmin || isCurator">
      <button mat-raised-button color="primary"
              [disabled]="!form.valid ||!form.dirty"
              (click)="onSave(form.value)" novalidate
              i18n="@@commonButtonSave">Lagre
      </button>
      <button mat-raised-button color="accent"
              (click)="onRevert()"
              [disabled]="!form.dirty"
              i18n="@@commonButtonRevert">
        Tilbakestill
      </button>
    </mat-card-actions>
  </mat-card>
</form>
